<% provide(:title, 'Resources') %>

<br>
    <h1>Hello, <%= @name %>!</h1>
<br/>

<a href="#new-res-btn" role="button" class="btn" data-toggle="modal">Add resource</a>

<!-- Modal dialog -->
<div id="new-res-btn" class="modal hide fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"
            aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit Introduction</h3>
  </div>
  <div class="modal-body">
    <%= form_for :resource, url: resources_path, html: {
            class: 'form-horizontal', id: 'new-resource-form' } do |f| %>
      Add new resource:
      <% %w[name url tags].each do |item| %>
        <div class="control-group">
          <%= f.text_field item.to_sym, placeholder: item.titleize %>
        </div>
      <% end %>
      <!--<%= f.submit 'Add', class: 'btn' %>-->
    <% end %>

    <!--<form id="InfroText" method="POST">-->
      <!--<input type="hidden" name="InfroText" value="1">-->
      <!--<table>-->
        <!--<tbody><tr><td>Title</td><td><input type="text" name="title" id="title" style="width:300px"><span class="hide help-inline">This is required</span></td></tr>-->
        <!--<tr><td>Introudction</td><td><textarea name="contect" style="width:300px;height:100px"></textarea></td></tr>-->
        <!--</tbody></table>-->
    <!--</form>-->
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" data-dismiss="modal" id="new-res-submit">Save changes</button>
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>

<br>
<%= link_to 'see your tags', tags_path %>

<%= render 'shared/errors' %>

<form class="form-search">

    <div class="input-append">
        <input type="text" class="span2 search-query">
        <button type="submit" class="btn">Search</button>
    </div>
</form>

<table class="table table-bordered table-striped table-condensed">
  <thead>
    <tr>
      <th style="width: 2%">№</th>
      <th style="width: 44%">Name</th>
      <th style="width: 44%">Tags</th>
      <th style="width: 10%">&nbsp</th>
    </tr>
  </thead>
  <tbody>
    <% @resources.each_with_index do |resource, count| %>
      <tr>
        <td><%= count+1 %></td>
        <td><%= link_to resource[:name], resource[:url] %></td>
        <td>
          <% resource[:tags].each do |tag_id| %>
            <div class="label"><%= @tags[tag_id] %></div>
          <% end %>
        </td>
        <td style="text-align: center">
          <%= link_to 'Edit', edit_resource_path(resource[:id]), { class: 'btn', id: "edit-#{count}" }%>
        </td>
        <td style="text-align: center">
          <%= link_to 'Delete', resource_path(resource[:id]),  :method => :delete, :confirm => "Are you sure?", :class => 'btn'%>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
